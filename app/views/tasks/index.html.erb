<% team_id = params[:team_id] %>
<% project_id = params[:project_id] %>

<h1>Tasks</h1>
<table class="table table-responsive">
  <thead>
    <tr>
      <th> Title <%= sort_by_title_asc(team_id,project_id)%><%= sort_by_title_desc(team_id,project_id)%> </th>
      <th> Priority <%= sort_by_priority_asc(team_id,project_id)%><%= sort_by_priority_desc(team_id,project_id)%> </th>
      <th> Complete <%= sort_by_status_asc(team_id,project_id)%><%= sort_by_status_desc(team_id,project_id)%> </th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @tasks.each do |task| %>
      <tr>
        <td><%= task.title %></td>
        <td><%= task.priority %></td>
        <td><%= status_tag(task.complete) %></td>
        <td><%= link_to 'Show', team_project_task_path(team_id,project_id,task),class:"btn btn-primary btn-sm" %></td>
        <td><%= link_to 'Edit', edit_team_project_task_path(team_id,project_id,task),class:"btn btn-primary btn-sm" %></td>
        <td><%= link_to 'Destroy', team_project_task_path(team_id,project_id,task), method: :delete, data: { confirm: "Are you sure you want to delete this task (#{task.title}) ?" },class:"btn btn-danger btn-sm" %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New task', new_team_project_task_path(params[:team_id],params[:project_id]),class:"btn btn-primary" %>
